DE-K8-OGDG:
  version: 0.1
  same:
    imageTag: master
    env:
      BROKER_URL: pyamqp://$(RABBIT_USER):$(RABBIT_USER_PASSWORD)@rabbit-de-3:5672/ongoing_demographics
      WORKER_POOL_TYPE: prefork
      WORKER_POOL_SIZE: 1
#    chiron:
#      ttl: 3.0
#      interval: 300
#      minPod: 0
#      maxPod: 5

  de-k8-ogdg-sa-enrich-with-avatar:
    env:
      QUEUE: ogdg.enrich_sa_with_avatar_by_ids,prioritized_ogdg.enrich_sa_with_avatar_by_ids
    chiron:
      maxPod: 10

  de-k8-ogdg-analyze:
    env:
      QUEUE: ogdg.analyze_audiences_demographic
    tolerations:
      - key: dedicated
        operator: Equal
        value: non-preemptible
        effect: NoSchedule
    nodeSelector:
      dedicated: non-preemptible

  de-k8-ogdg-central-navigator:
    env:
      QUEUE: central_navigator,prioritized_ogdg.request_enrich_sa_bids,ogdg.request_enrich_sa_bids

  de-k8-ogdg-sa-enriching:
    env:
      QUEUE: ogdg.detect_sa_language_bids,ogdg.enriching_sa_parsed_bio_and_lang_by_ids,ogdg.enrich_sa_email_by_ids,ogdg.enrich_sa_marital_by_ids,ogdg.enrich_sa_parental_by_ids,prioritized_ogdg.detect_sa_language_bids,prioritized_ogdg.enrich_sa_parsed_bio_by_ids,prioritized_ogdg.enrich_sa_email_by_ids,prioritized_ogdg.enrich_sa_parental_by_ids,prioritized_ogdg.enrich_sa_marital_by_ids,ogdg.enrich_sa_parental_marital_email_by_ids,prioritized_ogdg.enrich_sa_parental_marital_email_by_ids

  de-k8-ogdg-follower:
    env:
      QUEUE: prioritized_ogdg.to_enrich_followers,prioritized_ogdg.to_crawl_follower_accs,ogdg.process_follower_rlt,ogdg.update_follower_relationship,ogdg.handle_dg_followers,ogdg.to_crawl_follower_accs,ogdg.to_enrich_followers

  de-k8-ogdg-profiles-crawling:
    env:
      QUEUE: prioritized_ogdg.crawl_html_profile,ogdg.crawl_html_profile
      CRAWLING_USING_PROXY: True
      PROXY_API_KEY: fb5df35d856db2850e2e55cf76d017ab

  de-k8-ogdg-profiles:
    env:
      QUEUE: ogdg.crawl_new_user,ogdg.process_profile,prioritized_ogdg.process_profile,ogdg.write_profile_to_db,prioritized_ogdg.write_profile_to_db,prioritized_ogdg.write_inactive_profile_to_db,ogdg.write_inactive_profile_to_db,ogdg.write_enriched_profile_to_db,prioritized_ogdg.write_enriched_profile_to_db,prioritized_ogdg.process_post,ogdg.process_post,prioritized_ogdg.write_post_to_db,ogdg.write_post_to_db,ogdg.store_profile_avatar,prioritized_ogdg.store_profile_avatar
      CRAWLING_USING_PROXY: True
      PROXY_API_KEY: fb5df35d856db2850e2e55cf76d017ab

  de-k8-ogdg-collect:
    env:
      QUEUE: ogdg.check_demographics_tracking,ogdg.collect_audience_clf_status

  de-k8-ogdg-location-enrich:
    env:
      QUEUE: ogdg.enrich_sa_locations_timezones_by_ids,prioritized_ogdg.enrich_sa_locations_timezones_by_ids
      EXECUTE: python -m spacy download en

  de-k8-ogdg-crawl-ins-public-account:
    env:
      QUEUE: ogdg.crawl_ins_public_account,ogdg.crawl_ins_profile_by_id,prioritized_ogdg.crawl_ins_public_account,prioritized_ogdg.crawl_ins_profile_by_id
      PROXY_API_KEY: fb5df35d856db2850e2e55cf76d017ab
      CRAWLING_USING_PROXY: true
      WORKER_POOL_SIZE: 5

  de-k8-ogdg-enrich-influencer-score:
    env:
      QUEUE: ogdg.enrich_influencer_score,prioritized_ogdg.enrich_influencer_score
      PROXY_API_KEY: fb5df35d856db2850e2e55cf76d017ab
      CRAWLING_USING_PROXY: true
    chiron:
      enable: False

